# Практическое задание №3. Асинхронное взаимодействие через RabbitMQ
## Разработайте систему обработки заказов с асинхронным взаимодействием через брокер сообщений.
### Требуется реализовать:
* Producer для отправки заказов в очередь RabbitMQ
* Consumer для обработки заказов из очереди (имитация обработки: sleep 2 сек)
* Docker Compose конфигурацию для запуска RabbitMQ
* Структуру JSON сообщения: order_id, customer, amount, status
### Проанализировать:
* Время обработки 5 заказов
* Надежность доставки (роль basic_ack)
* Преимущества асинхронности над синхронными вызовами
### Формат сдачи: producer.py, consumer.py, docker-compose.yml 

## Ход работы
## 1. Сначала создаем producer.py, consumer.py, docker-compose.yml  для дальнейшей работы
<img width="295" height="152" alt="image" src="https://github.com/user-attachments/assets/2333d7d4-9abf-4d81-8b07-593c0f42d06d" />

> В docker-compose.yml появятся в файле кнопки плей, которые надо нажать для запуска файла
<img width="1303" height="601" alt="image" src="https://github.com/user-attachments/assets/679910eb-05ce-4b7d-bdfc-88f5e3edc496" />

## 2. Далее по шагам в терминале выполняем команды
> Командой устанавливаем Python-библиотеку для работы с RabbitMQ
```
pip install pika
```
> Далее запускаем RabbitMQ в фоновом режиме
```
docker-compose up -d
```
## 3. В одном терминале делаем запуск consumer
> Командой запускаем consumer, который подключается к очереди RabbitMQ, принимает заказы в формате JSON и имитирует их обработку с задержкой 2 секунды
```
python3 consumer.py
```
<img width="706" height="300" alt="image" src="https://github.com/user-attachments/assets/7e1503f4-0ca8-42a5-89bb-0f481754db67" />

## 4. В другом отправка заказов
> Эта команда отправляет заказы в очередь RabbitMQ в формате JSON (с полями `order_id`, `customer`, `amount`, `status`), инициируя асинхронную обработку 
```
python3 producer.py
```
<img width="680" height="107" alt="image" src="https://github.com/user-attachments/assets/7ff0e938-b67a-4860-8137-4ca9915f4a0d" />

# Вывод
В ходе работы реализована асинхронная система обработки заказов через RabbitMQ, producer отправляет заказы в очередь, consumer обрабатывает их с задержкой 2 секунды. Использование Docker Compose упростило запуск брокера, а подтверждения (basic_ack) обеспечивают надёжную доставку. Асинхронность позволила развязать отправку и обработку, повысив отказоустойчивость и масштабируемость по сравнению с синхронным подходом. 
## Анализ
> ### 1. Время обработки 5 заказов
> * При одном consumer: ~10 секунд (5 × 2 сек).
> * При нескольких consumer  параллельная обработка уменьшает общее время.
> * Благодаря basic_qos(prefetch_count=1), RabbitMQ не перегружает один consumer.
> * ### 2. Надёжность доставки и basic_ack
> * Без basic_ack сообщение считается потерянным при падении consumer и возвращается в очередь.
> * С basic_ack гарантируется, что сообщение обработано только после завершения.
> * delivery_mode=2 делает сообщение persistent, чтобы оно не исчезло при перезапуске RabbitMQ.
> ### 3. Преимущества асинхронности над синхронными вызовами
> * Масштабируемость: producer не ждёт ответа, может отправлять тысячи заказов мгновенно.
> * Отказоустойчивость: если consumer упал — сообщения остаются в очереди.
> * Разделение ответственности: компоненты слабо связаны, легко масштабируются независимо.
> * Пиковая нагрузка: система выдерживает всплески трафика за счёт буферизации в очереди.

